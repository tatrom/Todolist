(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(8),r=a.n(o);a(102),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(103);var c,l,s=a(171),u=a(172),d=a(173),f=a(164),m=a(129),p=a(167),b=a(175),g=a(176),E=a(174),h=a(15),v=a(29),k=a(80),C=a.n(k).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"8c49b133-928a-4a57-b997-bbf0ea6abb17"}}),y=function(){return C.get("todo-lists")},j=function(e){return C.post("todo-lists",{title:e})},O=function(e){return C.delete("todo-lists/".concat(e))},T=function(e,t){return C.put("todo-lists/".concat(e),{title:t})},I=function(e){return C.get("todo-lists/".concat(e,"/tasks"))},A=function(e,t){return C.delete("todo-lists/".concat(e,"/tasks/").concat(t))},w=function(e,t){return C.post("/todo-lists/".concat(e,"/tasks"),{title:t})},S=function(e,t,a){return C.put("/todo-lists/".concat(e,"/tasks/").concat(t),a)},x=function(e,t,a){return C.post("/auth/login",{email:e,password:t,rememberMe:a})},L=function(){return C.get("/auth/me")},F=function(){return C.delete("/auth/login")};!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(c||(c={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(l||(l={}));var P=function(e,t){e.messages.length?t(H({error:e.messages[0]})):t(H({error:"Some error occurred"})),t(B({status:"failed"}))},N=function(e,t){t(H({error:e.message?e.message:"Some error occurred"})),t(B({status:"failed"}))},z=a(25),D=Object(z.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(e,t){e.isLoggedIn=t.payload.value}}}),M=D.reducer,R=D.actions.setIsLoggedInAC,U=Object(z.b)({name:"app",initialState:{status:"loading",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(e,t){e.status=t.payload.status},setAppErrorAC:function(e,t){e.error=t.payload.error},setIsInitializedAC:function(e,t){e.isInitialized=t.payload.isInitialized}}}),q=U.reducer,B=U.actions.setAppStatusAC,H=U.actions.setAppErrorAC,Z=U.actions.setIsInitializedAC,J=Object(z.b)({name:"todolists-reducer",initialState:[],reducers:{removeTodolistAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));a>-1&&e.splice(a,1)},addTodolistAC:function(e,t){e.unshift(Object(v.a)(Object(v.a)({},t.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].title=t.payload.title},changeTodolistFilterAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].filter=t.payload.filter},setTodolistsAC:function(e,t){return t.payload.todolists.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{filter:"all",entityStatus:"idle"})}))},changeTodolistEntityStatusAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].entityStatus=t.payload.entityStatus}}}),K=J.reducer,W=J.actions.removeTodolistAC,$=J.actions.addTodolistAC,_=J.actions.changeTodolistTitleAC,G=J.actions.changeTodolistFilterAC,V=J.actions.setTodolistsAC,Y=J.actions.changeTodolistEntityStatusAC,Q=Object(z.b)({name:"tasks-reducer",initialState:{count:[]},reducers:{removeTaskAC:function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));n>-1&&a.splice(n,1)},addTaskAC:function(e,t){e[t.payload.task.todoListId].unshift(t.payload.task)},updateTaskAC:function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));n>-1&&(a[n]=Object(v.a)(Object(v.a)({},a[n]),t.payload.model))},setTasksAC:function(e,t){e[t.payload.todolistId]=t.payload.tasks}},extraReducers:function(e){e.addCase($,(function(e,t){e[t.payload.todolist.id]=[]})),e.addCase(W,(function(e,t){delete e[t.payload.id]})),e.addCase(V,(function(e,t){t.payload.todolists.forEach((function(t){e[t.id]=[]}))}))}}),X=Q.reducer,ee=Q.actions.removeTaskAC,te=Q.actions.addTaskAC,ae=Q.actions.updateTaskAC,ne=Q.actions.setTasksAC,ie=function(e,t,a){return function(n,i){n(B({status:"loading"}));var o=i().tasks[t].find((function(t){return t.id===e}));if(o){var r=Object(v.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,title:o.title,status:o.status},a);S(t,e,r).then((function(i){if(0===i.data.resultCode){n(B({status:"succeeded"}));var o=ae({taskId:e,model:a,todolistId:t});n(o)}else P(i.data,n)})).catch((function(e){return N(e,n)}))}}},oe=a(168),re=a(128),ce=a(43),le=a(177),se=a(165),ue=i.a.memo((function(e){var t=Object(n.useState)(""),a=Object(ce.a)(t,2),o=a[0],r=a[1],c=Object(n.useState)(null),l=Object(ce.a)(c,2),s=l[0],u=l[1],d=function(){var t=o.trim();t?e.addItem(t):u("Title is required!!!"),r("")};return i.a.createElement("div",null,i.a.createElement(le.a,{value:o,label:"type value",onChange:function(e){null!==s&&u(null),r(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&d()},error:!!s,helperText:s,disabled:e.disabled}),i.a.createElement(f.a,{onClick:d,color:"primary"},i.a.createElement(se.a,null)))})),de=i.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(ce.a)(t,2),o=a[0],r=a[1],c=Object(n.useState)(e.value),l=Object(ce.a)(c,2),s=l[0],u=l[1];return o?i.a.createElement(le.a,{value:s,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.onChange(s)}}):i.a.createElement("span",{onDoubleClick:function(){r(!0),u(e.value)}},e.value)})),fe=a(166),me=a(179),pe=i.a.memo((function(e){var t=Object(n.useCallback)((function(t){e.changeTaskTitle(e.task.id,t,e.todolistId)}),[e]);return i.a.createElement("div",{key:e.task.id,className:e.task.status?"is-done":""},i.a.createElement(me.a,{checked:2===e.task.status,color:"primary",onChange:function(t){var a=t.currentTarget.checked;e.changeTaskStatus(e.task.id,a?c.Completed:c.New,e.todolistId)}}),i.a.createElement(de,{value:e.task.title,onChange:t}),i.a.createElement(f.a,{onClick:function(){return e.removeTask(e.task.id,e.todolistId)}},i.a.createElement(fe.a,null)))})),be=i.a.memo((function(e){var t=Object(h.b)();Object(n.useEffect)((function(){var a;t((a=e.id,function(e){e(B({status:"loading"})),I(a).then((function(t){e(B({status:"succeeded"})),e(ne({tasks:t.data.items,todolistId:a}))}))}))}),[e.id,t]);var a=Object(n.useCallback)((function(t){e.addTask(t,e.id)}),[e]),o=Object(n.useCallback)((function(){e.removeTodolist(e.id)}),[e]),r=Object(n.useCallback)((function(t){e.changeTodolistTitle(e.id,t)}),[e]),l=Object(n.useCallback)((function(){return e.changeFilter("all",e.id)}),[e]),s=Object(n.useCallback)((function(){return e.changeFilter("active",e.id)}),[e]),u=Object(n.useCallback)((function(){return e.changeFilter("completed",e.id)}),[e]),d=e.tasks;return"active"===e.filter&&(d=e.tasks.filter((function(e){return e.status===c.New}))),"completed"===e.filter&&(d=e.tasks.filter((function(e){return e.status===c.Completed}))),i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(de,{value:e.title,onChange:r}),i.a.createElement(f.a,{onClick:o,disabled:"loading"===e.entityStatus},i.a.createElement(fe.a,null))),i.a.createElement(ue,{addItem:a,disabled:"loading"===e.entityStatus}),i.a.createElement("div",null,d.map((function(t){return i.a.createElement(pe,{task:t,changeTaskStatus:e.changeTaskStatus,changeTaskTitle:e.changeTaskTitle,removeTask:e.removeTask,todolistId:e.id,key:t.id})}))),i.a.createElement("div",{style:{paddingTop:"10px"}},i.a.createElement(p.a,{variant:"all"===e.filter?"outlined":"text",onClick:l,color:"default"},"All"),i.a.createElement(p.a,{variant:"active"===e.filter?"outlined":"text",onClick:s,color:"primary"},"Active"),i.a.createElement(p.a,{variant:"completed"===e.filter?"outlined":"text",onClick:u,color:"secondary"},"Completed")))})),ge=a(12),Ee=i.a.memo((function(e){var t=e.demo,a=void 0!==t&&t,o=Object(h.c)((function(e){return e.todolists})),r=Object(h.c)((function(e){return e.tasks})),c=Object(h.c)((function(e){return e.auth.isLoggedIn})),l=Object(h.b)();Object(n.useEffect)((function(){if(!a&&c){var e=function(e){e(B({status:"loading"})),y().then((function(t){e(V({todolists:t.data})),e(B({status:"succeeded"}))}))};l(e)}}),[c,l,a]);var s=Object(n.useCallback)((function(e,t){l(function(e,t){return function(a){a(B({status:"loading"})),A(e,t).then((function(n){if(0===n.data.resultCode){a(B({status:"succeeded"}));var i=ee({taskId:t,todolistId:e});a(i)}else P(n.data,a)})).catch((function(e){return N(e,a)}))}}(t,e))}),[l]),u=Object(n.useCallback)((function(e,t){l(function(e,t){return function(a){a(B({status:"loading"})),w(e,t).then((function(e){if(0===e.data.resultCode){var t=e.data.data.item;a(te({task:t})),a(B({status:"succeeded"}))}else P(e.data,a)})).catch((function(e){return N(e,a)}))}}(t,e))}),[l]),d=Object(n.useCallback)((function(e,t,a){l(ie(e,a,{status:t}))}),[l]),f=Object(n.useCallback)((function(e,t,a){l(ie(e,a,{title:t}))}),[l]),m=Object(n.useCallback)((function(e,t){var a=G({id:t,filter:e});l(a)}),[l]),p=Object(n.useCallback)((function(e){l(function(e){return function(t){t(B({status:"loading"})),t(Y({id:e,entityStatus:"loading"})),O(e).then((function(a){0===a.data.resultCode?(t(B({status:"succeeded"})),t(W({id:e}))):P(a.data,t)})).catch((function(e){N(e,t)}))}}(e))}),[l]),b=Object(n.useCallback)((function(e,t){l(function(e,t){return function(a){a(B({status:"loading"})),T(e,t).then((function(n){0===n.data.resultCode?(a(B({status:"succeeded"})),a(_({id:e,title:t}))):P(n.data,a)})).catch((function(e){N(e,a)}))}}(e,t))}),[l]),g=Object(n.useCallback)((function(e){l(function(e){return function(t){t(B({status:"loading"})),j(e).then((function(e){if(0===e.data.resultCode){var a=e.data.data.item;t($({todolist:a})),t(B({status:"succeeded"}))}else P(e.data,t)})).catch((function(e){N(e,t)}))}}(e))}),[l]);return c?i.a.createElement(i.a.Fragment,null,i.a.createElement(oe.a,{container:!0,style:{padding:"20px"}},i.a.createElement(ue,{addItem:g})),i.a.createElement(oe.a,{container:!0,spacing:3},o.map((function(e){var t=r[e.id];return i.a.createElement(oe.a,{item:!0,key:e.id},i.a.createElement(re.a,{style:{padding:"10px"}},i.a.createElement(be,{id:e.id,title:e.title,tasks:t,removeTask:s,changeFilter:m,addTask:u,changeTaskStatus:d,filter:e.filter,entityStatus:e.entityStatus,removeTodolist:p,changeTaskTitle:f,changeTodolistTitle:b})))})))):i.a.createElement(ge.a,{to:"/login"})})),he=a(181),ve=a(178);function ke(e){return i.a.createElement(ve.a,Object.assign({elevation:6,variant:"filled"},e))}function Ce(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.app.error})),a=function(t,a){"clickaway"!==a&&e(H({error:null}))};return i.a.createElement(he.a,{open:null!==t,autoHideDuration:6e3,onClose:a},i.a.createElement(ke,{onClose:a,severity:"error"},t))}var ye=a(182),je=a(163),Oe=a(169),Te=a(170),Ie=a(86),Ae=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.auth.isLoggedIn})),a=Object(Ie.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password.length?e.password.length<3&&(t.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 3 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):t.password="Required",t},onSubmit:function(t){var n,i,o;e((n=t.email,i=t.password,o=t.rememberMe,function(e){e(B({status:"loading"})),x(n,i,o).then((function(t){0===t.data.resultCode?(e(R({value:!0})),e(B({status:"succeeded"}))):P(t.data,e)})).catch((function(t){return N(t,e)}))})),a.resetForm()}});return t?i.a.createElement(ge.a,{to:"/"}):i.a.createElement(oe.a,{container:!0,justify:"center"},i.a.createElement(oe.a,{item:!0,xs:4},i.a.createElement("form",{onSubmit:a.handleSubmit},i.a.createElement(ye.a,null,i.a.createElement(je.a,null,i.a.createElement("p",null,"To log in get registered",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noopener noreferrer"},"here")),i.a.createElement("p",null,"or use common test account credentials:"),i.a.createElement("p",null,"Email: free@samuraijs.com"),i.a.createElement("p",null,"Password: free")),i.a.createElement(Oe.a,null,i.a.createElement(le.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.touched.email&&a.errors.email?i.a.createElement("div",{style:{color:"red"}},a.errors.email):null,i.a.createElement(le.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.touched.password&&a.errors.password?i.a.createElement("div",{style:{color:"red"}},a.errors.password):null,i.a.createElement(Te.a,{label:"Remember me",control:i.a.createElement(me.a,a.getFieldProps("rememberMe"))}),i.a.createElement(p.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var we=function(e){var t=e.demo,a=void 0!==t&&t,o=Object(h.c)((function(e){return e.app.status})),r=Object(h.c)((function(e){return e.app.isInitialized})),c=Object(h.c)((function(e){return e.auth.isLoggedIn})),l=Object(h.b)();return Object(n.useEffect)((function(){l((function(e){L().then((function(t){0===t.data.resultCode&&e(R({value:!0}))})).finally((function(){e(Z({isInitialized:!0}))}))}))}),[l]),r?i.a.createElement("div",{className:"App"},i.a.createElement(Ce,null),i.a.createElement(u.a,{position:"static"},i.a.createElement(d.a,null,i.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu"},i.a.createElement(E.a,null)),i.a.createElement(m.a,{variant:"h6"},"News"),c&&i.a.createElement(p.a,{onClick:function(){l((function(e){e(B({status:"loading"})),F().then((function(t){0===t.data.resultCode?(e(R({value:!1})),e(B({status:"succeeded"}))):P(t.data,e)})).catch((function(t){N(t,e)}))}))}},"logout")),"loading"===o&&i.a.createElement(b.a,null)),i.a.createElement(g.a,{fixed:!0},i.a.createElement(ge.d,null,i.a.createElement(ge.b,{exact:!0,path:"/",render:function(){return i.a.createElement(Ee,{demo:a})}}),i.a.createElement(ge.b,{exact:!0,path:"/login",render:function(){return i.a.createElement(Ae,null)}}),i.a.createElement(ge.b,{path:"/404",render:function(){return i.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),i.a.createElement(ge.a,{from:"*",to:"/404"})))):i.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},i.a.createElement(s.a,null))},Se=a(20),xe=a(46),Le=Object(Se.c)({tasks:X,todolists:K,app:q,auth:M}),Fe=Object(z.a)({reducer:Le,middleware:function(e){return e().prepend(xe.a)}});window.store=Fe;var Pe=a(45);r.a.render(i.a.createElement(h.a,{store:Fe},i.a.createElement(Pe.a,null,i.a.createElement(we,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,a){e.exports=a(127)}},[[97,1,2]]]);
//# sourceMappingURL=main.577906ad.chunk.js.map